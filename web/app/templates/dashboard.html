<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>Server Monitor</title>
    <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="/static/style.css">
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üíæ</text></svg>">
</head>
<body>
<div class="container">

    <h1>SERVER MONITOR</h1>

    <!-- ÏãúÏä§ÌÖú ÏÉÅÌÉú -->
    <div class="card">
        <p>CPU :
            <span class="{{ cpu_class }}">{{ cpu }}%</span>
        </p>
        <p>MEMORY :
            <span class="{{ memory_class }}">{{ memory }}%</span>
        </p>
        <p>DISK :
            <span class="good">{{ disk }}%</span>
        </p>
        <p>UPTIME :
            <span>{{ uptime }}</span>
        </p>
    </div>

    <!-- ÏÑúÎπÑÏä§ ÏÉÅÌÉú -->
    <div class="card">
        <h2>SERVICES</h2>
        <div class="service-list">
            {% for name, status in services.items() %}
            <div class="service-item">
                <div class="service-name-group">
                    <span class="dot 
                        {% if 'zombie' in status.lower() or 'idle' in status.lower() %}
                            warn
                        {% elif status.lower().startswith('active') %}
                            on
                        {% else %}
                            off
                        {% endif %}">
                    </span>
                    <span class="service-name">{{ name }}</span>
                </div>
                <span class="service-status">[ {{ status | upper }} ]</span>
            </div>
            {% endfor %}
        </div>
    </div>

    <!-- Î°úÍ∑∏ ÏΩòÏÜî -->
    <div class="card">
        <h2>LOG CONSOLE</h2>
        <p style="font-size:9px; color:#999; margin-bottom: 5px;">
            SOURCE : {{ log_source }}
        </p>
        <div class="console" id="log-console">
            {% for line in logs %}<div class="log-line">{{ line }}</div>{% endfor %}
        </div>
    </div>


    <!-- ÌîÑÎ°úÏÑ∏Ïä§ ÏÉÅÌÉú -->
    <div class="card process-card">
        <h2>PROCESSES</h2>

        {% for p in processes %}
        <p>
            <!-- ÏÉÅÌÉú ÎèÑÌä∏ -->
            {% if p.status_code == 'OK' %}
                <span class="dot on"></span>    
            {% elif p.status_code == 'WARN' %}
                <span class="dot warn"></span>  
            {% elif p.status_code == 'DANGER' %}
                <span class="dot off"></span>   
            {% else %}
                <span class="dot"></span>       
            {% endif %}
            
            {{ p.name }} (PID {{ p.pid }})
        </p>
        <span style="font-size: 10px; margin-left: 5px;">
            {{ p.status_summary }}
        </span>

        <p style="font-size:9px; margin-left:18px; line-height: 1.6;">
            CPU {{ p.cpu }}% |
            MEM {{ p.memory }}% |
            USER {{ p.user }}
        </p>

        {% if p.ports %}
        <p style="font-size:9px; margin-left:18px; line-height: 1.6;">
            PORT : {{ p.ports | join(', ') }}
        </p>
        {% endif %}

        {% if p.warnings %}
        <p style="font-size:9px; margin-left:18px; line-height: 1.6;" class="bad">
            ‚ö† {{ p.warnings | join(', ') }}
        </p>
        {% endif %}

        <p style="font-size:9px; margin-left:18px; line-height: 1.6; color:#999;">
            {{ p.explain }}
        </p>

        <hr style="border:1px dashed #00ff9c; margin:10px 0;">
        {% endfor %}
    </div>

</div>
</body>

<script>
    const logConsole = document.querySelector('.log-content');
    logConsole.scrollTop = logConsole.scrollHeight; // ÌéòÏù¥ÏßÄ Î°úÎìú Ïãú ÏµúÌïòÎã®ÏúºÎ°ú Ïù¥Îèô
</script>
</html>
