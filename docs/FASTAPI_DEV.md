# FASTAPI 기반 서버 모니터링 설계

> 프로젝트에서 FastAPI를 기반으로 서버 모니터링 시스템을 설계·확장한 개발 기록

> 기능 사용법보다, "왜 이렇게 설계했는지"를 설명하는 문서


## FastAPI 선택 이유
### 1. FastAPI란?
> **Python으로 웹 서버(API 서버)를 쉽게 만들 수 있게 도와주는 도구**

- Python 코드로 웹 주소(URL)에 접속했을 때 어떤 동작을 할지 정의할 수 있는 프레임워크
- `/cpu` 라는 주소로 접속하면 → CPU 사용률을 보여준다
- `/dashboard` 로 접속하면 → 웹 화면(HTML)을 보여준다

<br>

### 2. 왜 단순 Python 스크립트로는 부족한가?

```bash
python test.py
```

* 웹 브라우저에서 접속 불가
* 여러 사용자의 요청을 동시에 처리하기 힘듦
* 서버 프로그램처럼 계속 켜두기 불편함

👉 **서버 상태를 웹으로 보여주려면 단순 스크립트가 아닌 "웹 서버"가 필요**

<br>

### 3. FastAPI를 선택한 이유

* Python 문법 그대로 사용 (기초 문법만 알아도 가능)
* 코드 구조가 단순하고 가독성이 높음
* 서버 상태 확인 같은 가벼운 작업에 적합
* 기능을 단계적으로 확장하기 쉬움

👉 **대규모 서비스가 아니라,운영 관점에서 서버 상태를 이해하고 판단하기 위한 도구이므로 FastAPI가 과하지 않으면서도 충분한 선택**

### 4. FastAPI의 한계 (의도적으로 감수한 부분)

- 초당 수천~수만 건의 메트릭 수집에는 적합하지 않음
- Prometheus / Grafana를 대체하려는 목적이 아님

### 5. 왜 다른 프레임워크가 아닌가?

| 선택지             | 사용하지 않은 이유                     |
| --------------- | ------------------------------ |
| **Node.js**     | 시스템 리소스·프로세스 수집은 Python이 더 직접적 |
| **Spring Boot** | 웹 서비스용 프레임워크로, 모니터링 도구에는 과함    |
| **Next.js**     | UI 중심 프레임워크로 서버 상태 수집과 역할이 다름  |

---
<br>

## FastAPI가 이 프로젝트에서 하는 역할

### 1. 중간 관리자

```
[ Rocky Linux 서버 ]
        |
        |  (CPU, 메모리, 로그 읽기)
        v
[ Python 코드 ]
        |
        |  FastAPI
        v
[ 웹 브라우저 ]
```

- OS 의존 정보 수집 코드
- 운영 정책과 판단 로직
- 사용자에게 보여줄 API / 화면


### 2. API 서버 + 템플릿 서버 통합 구조

> 단순 REST API 서버가 아니라, **API 제공과 화면 렌더링을 동시에 담당**

- API
  - `/api/cpu`, `/api/process` 등
  - JSON 형태로 서버 상태 제공
- 화면
  - `/dashboard`
  - Jinja2 템플릿으로 HTML 직접 렌더링

이 구조를 선택한 이유:
- 프론트엔드 프레임워크 없이도 즉시 사용 가능
- 서버 내부 도구 성격에 적합
- 네트워크, 인증, 배포 복잡도 최소화
- 모니터링 도구 특성상 **단순 접근·즉시 확인** 우선

---
<br>

## 실행 구조 설계 관점

### 1. main.py를 단일 엔트리로 둔 이유

`main.py`는 단순한 시작 파일이 아니라, **애플리케이션의 유일한 진입점(Entry Point)**

- 이 파일이 실행되면 웹 서버가 켜짐
- 모든 URL과 기능이 여기서 연결됨
- uvicorn을 통해 서버 프로세스로 실행됨
  
> 운영 환경 변화에 흔들리지 않는 구조를 만들기 위한 선택

### 2. 가상환경(venv)을 사용하는 이유

이 프로젝트는 개발용 스크립트가 아니라 **서버에서 장시간 실행되는 프로그램**

- 프로젝트 전용 Python 환경 분리
- 서버 전체 Python 환경 오염 방지
- 다른 서버로 이식 시 동일한 환경 재현 가능
 
> 서버에서 Python 프로젝트를 안전하게 관리하기 위해 사용하는 기본 습관


```bash
python3 -m venv venv
source venv/bin/activate
```

- `server-monitor` 전용 Python 공간 생성
- FastAPI, psutil 등을 안전하게 설치 가능

---
<br>

## 이 문서의 범위

- FastAPI 선택과 사용 이유
- 서버 모니터링 구조 설계
- 운영 관점의 판단 기준

> 구현 세부 코드는 web/README.md 및 소스 코드에 포함된다.